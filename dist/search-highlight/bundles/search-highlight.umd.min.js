!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("rxjs"),require("rxjs/operators"),require("@ngrx/store"),require("@angular/router"),require("@alfresco/aca-shared/store"),require("@angular/common"),require("@angular/platform-browser"),require("@ngx-translate/core"),require("@angular/core"),require("@alfresco/adf-core")):"function"==typeof define&&define.amd?define("search-highlight",["exports","rxjs","rxjs/operators","@ngrx/store","@angular/router","@alfresco/aca-shared/store","@angular/common","@angular/platform-browser","@ngx-translate/core","@angular/core","@alfresco/adf-core"],t):t(e["search-highlight"]={},e.rxjs,e.rxjs.operators,e["@ngrx/store"],e.ng.router,e.store$1,e.ng.common,e.ng.platformBrowser,e["@ngx-translate/core"],e.ng.core,e["@alfresco/adf-core"])}(this,function(e,r,t,n,o,i,s,a,c,l,u){"use strict";var p=function(){function e(){}return e.decorators=[{type:l.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=l.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),d=function(){function e(e,t,n){this.store=e,this.alfrescoApiService=t,this.router=n,this.onDestroy$=new r.Subject,this.name$=new r.BehaviorSubject(""),this.title$=new r.BehaviorSubject("")}return e.prototype.ngOnInit=function(){var r=this;this.updateValues(),this.alfrescoApiService.nodeUpdated.pipe(t.takeUntil(this.onDestroy$)).subscribe(function(e){var t=r.context.row;if(t){var n=t.node.entry;n.id===e.id&&(n.name=e.name,n.properties=Object.assign({},e.properties),n.search=Object.assign({},e.search),r.updateValues())}})},e.prototype.updateValues=function(){var t=this;this.node=this.context.row.node;var e=this.node.entry.search&&this.node.entry.search.highlight?this.node.entry.search.highlight:[],n=this.node.entry,r=n.name,o=n.properties,i=o?o["cm:title"]:"";this.name$.next(r),i!==r&&this.title$.next(i?"( "+i+" )":""),e.forEach(function(e){"cm:name"===e.field&&t.name$.next(e.snippets[0]),"cm:title"===e.field&&i!==r&&t.title$.next("( "+e.snippets[0]+" )"),"cm:content"===e.field&&(t.highlight=e.snippets)})},e.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},Object.defineProperty(e.prototype,"description",{get:function(){var e=this.node.entry.properties;return e?e["cm:description"]:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modifiedAt",{get:function(){return this.node.entry.modifiedAt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){var e=this.node.entry.content;return e?e.sizeInBytes:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"user",{get:function(){return this.node.entry.modifiedByUser.displayName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFile",{get:function(){return this.node.entry.isFile},enumerable:!0,configurable:!0}),e.prototype.showPreview=function(e){e.stopPropagation(),this.store.dispatch(new i.ViewNodeAction(this.node.entry.id,{location:this.router.url}))},e.prototype.navigate=function(e){e.stopPropagation(),this.store.dispatch(new i.NavigateToFolder(this.node))},e.decorators=[{type:l.Component,args:[{selector:"aca-search-results-row-highlight",encapsulation:l.ViewEncapsulation.None,template:'<div class="line">\n    <span tabindex="0" role="link" *ngIf="isFile" (click)="showPreview($event)" (keyup.enter)="showPreview($event)"\n        class="link" innerHTML=" {{ name$ | async }}">\n       \n    </span>\n    <span tabindex="0" role="link" *ngIf="!isFile" (click)="navigate($event)" (keyup.enter)="navigate($event)"\n        class="bold link" innerHTML=" {{ name$ | async }}">\n    \n    </span>\n    <span  innerHTML=" {{ title$ | async }}"></span>\n</div>\n\n<div *ngIf="description" class="line">{{ description }}</div>\n\n<div class="line">\n    {{ \'APP.BROWSE.SEARCH.CUSTOM_ROW.MODIFIED\' | translate }}:\n    {{ modifiedAt | date: \'medium\' }}\n    {{ \'APP.BROWSE.SEARCH.CUSTOM_ROW.BY_USER\' | translate: { user: user } }}\n\n    <span *ngIf="size">| {{ \'APP.BROWSE.SEARCH.CUSTOM_ROW.SIZE\' | translate }}:\n        {{ size | adfFileSize }}\n    </span>\n</div>\n\n<ng-container  *ngTemplateOutlet="locationField">\n    {{ \'APP.BROWSE.SEARCH.CUSTOM_ROW.LOCATION\' | translate }}:\n</ng-container>\n\n<div class="line" *ngIf="highlight">\n    ...<span *ngFor="let high of highlight" [innerHTML]="high"></span>...\n</div>',styles:[""]}]}],e.ctorParameters=function(){return[{type:n.Store},{type:u.AlfrescoApiService},{type:o.Router}]},e.propDecorators={context:[{type:l.Input}],locationField:[{type:l.Input}]},e}();function h(){return[u.CoreModule,u.ToolbarModule,u.PipeModule,u.DirectiveModule]}var f=function(){function e(){}return e.decorators=[{type:l.NgModule,args:[{imports:h(),exports:h()}]}],e}(),g=function(){function e(){}return e.decorators=[{type:l.NgModule,args:[{declarations:[d],imports:[s.CommonModule,a.BrowserModule,c.TranslateModule.forChild(),f],exports:[d],entryComponents:[d],schemas:[l.CUSTOM_ELEMENTS_SCHEMA]}]}],e}();e.SearchHighlightService=p,e.SearchHighlightComponent=d,e.SearchHighlightModule=g,e.ɵb=f,e.ɵa=h,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=search-highlight.umd.min.js.map