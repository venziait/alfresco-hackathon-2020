!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/material/dialog"),require("@angular/router"),require("@alfresco/adf-core"),require("@angular/material/snack-bar"),require("rxjs/operators"),require("@ngrx/store"),require("@angular/core"),require("@ngrx/effects")):"function"==typeof define&&define.amd?define("@alfresco/aca-shared/store",["exports","@angular/material/dialog","@angular/router","@alfresco/adf-core","@angular/material/snack-bar","rxjs/operators","@ngrx/store","@angular/core","@ngrx/effects"],t):t((e.alfresco=e.alfresco||{},e.alfresco["aca-shared"]=e.alfresco["aca-shared"]||{},e.alfresco["aca-shared"].store={}),e.ng.material.dialog,e.ng.router,e.adfCore,e.ng.material["snack-bar"],e.rxjs.operators,e.store,e.ng.core,e.effects)}(this,function(e,t,o,i,n,a,r,s,c){"use strict";
/*!
     * @license
     * Alfresco Example Content Application
     *
     * Copyright (C) 2005 - 2020 Alfresco Software Limited
     *
     * This file is part of the Alfresco Example Content Application.
     * If the software was purchased under a paid Alfresco license, the terms of
     * the paid license agreement will prevail.  Otherwise, the software is
     * provided under the following open source license terms:
     *
     * The Alfresco Example Content Application is free software: you can redistribute it and/or modify
     * it under the terms of the GNU Lesser General Public License as published by
     * the Free Software Foundation, either version 3 of the License, or
     * (at your option) any later version.
     *
     * The Alfresco Example Content Application is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     * GNU Lesser General Public License for more details.
     *
     * You should have received a copy of the GNU Lesser General Public License
     * along with Alfresco. If not, see <http://www.gnu.org/licenses/>.
     */var l={SetSettingsParameter:"SET_SETTINGS_PARAMETER",SetInitialState:"SET_INITIAL_STATE",SetHeaderColor:"SET_HEADER_COLOR",SetCurrentFolder:"SET_CURRENT_FOLDER",SetCurrentUrl:"SET_CURRENT_URL",SetUserProfile:"SET_USER_PROFILE",SetRepositoryInfo:"SET_REPOSITORY_INFO",ToggleInfoDrawer:"TOGGLE_INFO_DRAWER",ToggleDocumentDisplayMode:"TOGGLE_DOCUMENT_DISPLAY_MODE",Logout:"LOGOUT",ReloadDocumentList:"RELOAD_DOCUMENT_LIST",ResetSelection:"RESET_SELECTION",SetInfoDrawerState:"SET_INFO_DRAWER_STATE",SetInfoDrawerMetadataAspect:"SET_INFO_DRAWER_METADATA_ASPECT",CloseModalDialogs:"CLOSE_MODAL_DIALOGS"},p=function et(e){this.payload=e,this.type=l.SetSettingsParameter},d=function tt(e){this.payload=e,this.type=l.SetInitialState},u=function ot(e){this.color=e,this.type=l.SetHeaderColor},f=function it(e){this.payload=e,this.type=l.SetCurrentFolder},h=function nt(e){this.payload=e,this.type=l.SetCurrentUrl},y=function at(e){this.payload=e,this.type=l.SetUserProfile},E=function rt(){this.type=l.ToggleInfoDrawer},S=function st(){this.type=l.ToggleDocumentDisplayMode},A=function ct(){this.type=l.Logout},g=function lt(e){this.payload=e,this.type=l.ReloadDocumentList},T=function pt(e){this.payload=e,this.type=l.ResetSelection},F=function dt(e){this.payload=e,this.type=l.SetInfoDrawerState},R=function ut(){this.type=l.CloseModalDialogs},_=function ft(e){this.payload=e,this.type=l.SetRepositoryInfo},D={Delete:"DELETE_LIBRARY",Create:"CREATE_LIBRARY",Navigate:"NAVIGATE_LIBRARY",Update:"UPDATE_LIBRARY",Leave:"LEAVE_LIBRARY"},N=function ht(e){this.payload=e,this.type=D.Delete},O=function yt(){this.type=D.Create},m=function Et(e){this.payload=e,this.type=D.Navigate},v=function St(e){this.payload=e,this.type=D.Update},I=function At(e){this.payload=e,this.type=D.Leave},L={SetSelection:"SET_SELECTED_NODES",Delete:"DELETE_NODES",UndoDelete:"UNDO_DELETE_NODES",RestoreDeleted:"RESTORE_DELETED_NODES",PurgeDeleted:"PURGE_DELETED_NODES",Download:"DOWNLOAD_NODES",CreateFolder:"CREATE_FOLDER",EditFolder:"EDIT_FOLDER",Share:"SHARE_NODE",Unshare:"UNSHARE_NODES",Copy:"COPY_NODES",Move:"MOVE_NODES",ManagePermissions:"MANAGE_PERMISSIONS",PrintFile:"PRINT_FILE",ManageVersions:"MANAGE_VERSIONS",EditOffline:"EDIT_OFFLINE",UnlockForWriting:"UNLOCK_WRITE_LOCK",AddFavorite:"ADD_FAVORITE",RemoveFavorite:"REMOVE_FAVORITE"},C=function gt(e){void 0===e&&(e=[]),this.payload=e,this.type=L.SetSelection},P=function Tt(e){void 0===e&&(e=[]),this.payload=e,this.type=L.Delete},U=function Ft(e){void 0===e&&(e=[]),this.payload=e,this.type=L.UndoDelete},M=function Rt(e){this.payload=e,this.type=L.RestoreDeleted},b=function _t(e){this.payload=e,this.type=L.PurgeDeleted},w=function Dt(e){void 0===e&&(e=[]),this.payload=e,this.type=L.Download},V=function Nt(e){this.payload=e,this.type=L.CreateFolder},k=function Ot(e){this.payload=e,this.type=L.EditFolder},$=function mt(e){this.payload=e,this.type=L.Share},j=function vt(e){this.payload=e,this.type=L.Unshare},B=function It(e){this.payload=e,this.type=L.Copy},G=function Lt(e){this.payload=e,this.type=L.Move},W=function Ct(e){this.payload=e,this.type=L.ManagePermissions},x=function Pt(e){this.payload=e,this.type=L.PrintFile},H=function Ut(e){this.payload=e,this.type=L.ManageVersions},Y=function Mt(e){this.payload=e,this.type=L.EditOffline},q=function bt(e){this.payload=e,this.type=L.UnlockForWriting},K=function wt(e){this.payload=e,this.type=L.AddFavorite},Q=function Vt(e){this.payload=e,this.type=L.RemoveFavorite},X={NavigateUrl:"NAVIGATE_URL",NavigateRoute:"NAVIGATE_ROUTE",NavigateFolder:"NAVIGATE_FOLDER",NavigateParentFolder:"NAVIGATE_PARENT_FOLDER"},z=function kt(e){this.payload=e,this.type=X.NavigateUrl},J=function $t(e){this.payload=e,this.type=X.NavigateRoute},Z=function jt(e){this.payload=e,this.type=X.NavigateFolder},ee=function Bt(e){this.payload=e,this.type=X.NavigateParentFolder},te={SearchByTerm:"SEARCH_BY_TERM",ToggleFilter:"TOGGLE_SEARCH_FILTER",ShowFilter:"SHOW_SEARCH_FILTER",HideFilter:"HIDE_SEARCH_FILTER"},oe=function Gt(e,t){this.payload=e,this.searchOptions=t,this.type=te.SearchByTerm},ie=function Wt(){this.type=te.ToggleFilter},ne=function xt(){this.type=te.ShowFilter},ae=function Ht(){this.type=te.HideFilter},re={Info:"SNACKBAR_INFO",Warning:"SNACKBAR_WARNING",Error:"SNACKBAR_ERROR"},se=function Yt(e,t){this.title=e,this.action=t},ce=function qt(e,t){this.payload=e,this.params=t,this.type=re.Info,this.duration=4e3},le=function Kt(e,t){this.payload=e,this.params=t,this.type=re.Warning,this.duration=4e3},pe=function Qt(e,t){this.payload=e,this.params=t,this.type=re.Error,this.duration=4e3},de={UploadFiles:"UPLOAD_FILES",UploadFolder:"UPLOAD_FOLDER",UploadFileVersion:"UPLOAD_FILE_VERSION"},ue=function Xt(e){this.payload=e,this.type=de.UploadFiles},fe=function zt(e){this.payload=e,this.type=de.UploadFolder},he=function Jt(){this.type=de.UploadFileVersion},ye={ViewFile:"VIEW_FILE",ViewNode:"VIEW_NODE",FullScreen:"FULLSCREEN_VIEWER",ClosePreview:"CLOSE_PREVIEW"},Ee=function Zt(e,t){this.payload=e,this.parentId=t,this.type=ye.ViewFile},Se=function eo(e,t){this.nodeId=e,this.viewNodeExtras=t,this.type=ye.ViewNode},Ae=function to(e){this.payload=e,this.type=ye.FullScreen},ge=function oo(e){this.payload=e,this.type=ye.ClosePreview},Te="SET_INFO_DRAWER_METADATA_ASPECT",Fe=function io(e){this.payload=e,this.type=Te},Re={FileFromTemplate:"FILE_FROM_TEMPLATE",FolderFromTemplate:"FOLDER_FROM_TEMPLATE",CreateFromTemplate:"CREATE_FROM_TEMPLATE",CreateFromTemplateSuccess:"CREATE_FROM_TEMPLATE_SUCCESS"},_e=function no(){this.type=Re.FileFromTemplate},De=function ao(){this.type=Re.FolderFromTemplate},Ne=function ro(e){this.payload=e,this.type=Re.CreateFromTemplate},Oe=function so(e){this.node=e,this.type=Re.CreateFromTemplateSuccess},me={ContextMenu:"CONTEXT_MENU"},ve=function co(e){this.event=e,this.type=me.ContextMenu};function Ie(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;0<=s;s--)(n=e[s])&&(r=(a<3?n(r):3<a?n(t,o,r):n(t,o))||r);return 3<a&&r&&Object.defineProperty(t,o,r),r}function Le(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}var Ce=function(){function e(e,t){var o=this;this.actions$=e,this.matDialog=t,this.closeAll$=this.actions$.pipe(c.ofType(l.CloseModalDialogs),a.map(function(){return o.matDialog.closeAll()}))}return e.decorators=[{type:s.Injectable}],e.ctorParameters=function(){return[{type:c.Actions},{type:t.MatDialog}]},Ie([c.Effect({dispatch:!1}),Le("design:type",Object)],e.prototype,"closeAll$",void 0),e}(),Pe=function(){function e(e,t,o){var i=this;this.store=e,this.actions$=t,this.router=o,this.navigateUrl$=this.actions$.pipe(c.ofType(X.NavigateUrl),a.map(function(e){e.payload&&i.router.navigateByUrl(e.payload)})),this.navigateRoute$=this.actions$.pipe(c.ofType(X.NavigateRoute),a.map(function(e){i.router.navigate(e.payload)})),this.navigateToFolder$=this.actions$.pipe(c.ofType(X.NavigateFolder),a.map(function(e){e.payload&&e.payload.entry&&i.navigateToFolder(e.payload.entry)})),this.navigateToParentFolder$=this.actions$.pipe(c.ofType(X.NavigateParentFolder),a.map(function(e){e.payload&&e.payload.entry&&i.navigateToParentFolder(e.payload.entry)}))}return e.prototype.navigateToFolder=function(e){var t=this,o=null,i=e.path,n=e.id;if(i&&i.name&&i.elements){var a=this.isLibraryContent(i),r=i.elements[i.elements.length-1],s=a?"/libraries":"/personal-files";o=a?[s,"Sites"===r.name?{}:n]:[s,n],setTimeout(function(){t.router.navigate(o)},10)}else this.router.navigate(["/personal-files",e.id])},e.prototype.navigateToParentFolder=function(e){var t=this,o=null,i=e.path;if(i&&i.name&&i.elements){var n=this.isLibraryContent(i),a=i.elements[i.elements.length-1],r=n?"/libraries":"/personal-files";o=n?[r,"Sites"===a.name?{}:a.id]:[r,a.id],setTimeout(function(){t.router.navigate(o)},10)}else this.store.dispatch(new pe("APP.MESSAGES.ERRORS.CANNOT_NAVIGATE_LOCATION"))},e.prototype.isLibraryContent=function(e){return!!(e&&2<=e.elements.length&&"Sites"===e.elements[1].name)},e.decorators=[{type:s.Injectable}],e.ctorParameters=function(){return[{type:r.Store},{type:c.Actions},{type:o.Router}]},Ie([c.Effect({dispatch:!1}),Le("design:type",Object)],e.prototype,"navigateUrl$",void 0),Ie([c.Effect({dispatch:!1}),Le("design:type",Object)],e.prototype,"navigateRoute$",void 0),Ie([c.Effect({dispatch:!1}),Le("design:type",Object)],e.prototype,"navigateToFolder$",void 0),Ie([c.Effect({dispatch:!1}),Le("design:type",Object)],e.prototype,"navigateToParentFolder$",void 0),e}(),Ue=function(){function e(e,t,o,i){var n=this;this.store=e,this.actions$=t,this.snackBar=o,this.translationService=i,this.infoEffect=this.actions$.pipe(c.ofType(re.Info),a.map(function(e){n.showSnackBar(e,"info-snackbar")})),this.warningEffect=this.actions$.pipe(c.ofType(re.Warning),a.map(function(e){n.showSnackBar(e,"warning-snackbar")})),this.errorEffect=this.actions$.pipe(c.ofType(re.Error),a.map(function(e){n.showSnackBar(e,"error-snackbar")}))}return e.prototype.showSnackBar=function(e,t){var o=this,i=this.translate(e.payload,e.params),n=null;e.userAction&&(n=this.translate(e.userAction.title));var a=this.snackBar.open(i,n,{duration:e.duration||4e3,panelClass:t});e.userAction&&a.onAction().subscribe(function(){o.store.dispatch(e.userAction.action)})},e.prototype.translate=function(e,t){return this.translationService.instant(e,t)},e.decorators=[{type:s.Injectable}],e.ctorParameters=function(){return[{type:r.Store},{type:c.Actions},{type:n.MatSnackBar},{type:i.TranslationService}]},Ie([c.Effect({dispatch:!1}),Le("design:type",Object)],e.prototype,"infoEffect",void 0),Ie([c.Effect({dispatch:!1}),Le("design:type",Object)],e.prototype,"warningEffect",void 0),Ie([c.Effect({dispatch:!1}),Le("design:type",Object)],e.prototype,"errorEffect",void 0),e}(),Me=function(e){return e.app},be=r.createSelector(Me,function(e){return e.headerColor}),we=r.createSelector(Me,function(e){return e.appName}),Ve=r.createSelector(Me,function(e){return e.logoPath}),ke=r.createSelector(Me,function(e){return e.languagePicker}),$e=r.createSelector(Me,function(e){return e.user}),je=r.createSelector(Me,function(e){return e.navigation.currentFolder}),Be=r.createSelector(Me,function(e){return e.selection}),Ge=r.createSelector(Me,function(e){return e.sharedUrl}),We=r.createSelector(Me,function(e){return e.navigation}),xe=r.createSelector(Me,function(e){return e.infoDrawerOpened}),He=r.createSelector(Me,function(e){return e.showFacetFilter}),Ye=r.createSelector(Me,function(e){return e.documentDisplayMode}),qe=r.createSelector(Me,function(e){return e.repository}),Ke=r.createSelector(qe,function(e){return e.status.isQuickShareEnabled}),Qe=r.createSelector(Me,function(e){return e.user.isAdmin}),Xe=r.createSelector(Be,We,function(e,t){return{selection:e,navigation:t}}),ze=r.createSelector(Be,We,$e,qe,function(e,t,o,i){return{selection:e,navigation:t,profile:o,repository:i}}),Je=r.createSelector(Me,function(e){return e.infoDrawerMetadataAspect}),Ze=function(){function e(){}return e.decorators=[{type:s.NgModule,args:[{imports:[c.EffectsModule.forFeature([Ue,Ce,Pe])]}]}],e}();e.AppActionTypes=l,e.SetSettingsParameterAction=p,e.SetInitialStateAction=d,e.SetHeaderColorAction=u,e.SetCurrentFolderAction=f,e.SetCurrentUrlAction=h,e.SetUserProfileAction=y,e.ToggleInfoDrawerAction=E,e.ToggleDocumentDisplayMode=S,e.LogoutAction=A,e.ReloadDocumentListAction=g,e.ResetSelectionAction=T,e.SetInfoDrawerStateAction=F,e.CloseModalDialogsAction=R,e.SetRepositoryInfoAction=_,e.LibraryActionTypes=D,e.DeleteLibraryAction=N,e.CreateLibraryAction=O,e.NavigateLibraryAction=m,e.UpdateLibraryAction=v,e.LeaveLibraryAction=I,e.NodeActionTypes=L,e.SetSelectedNodesAction=C,e.DeleteNodesAction=P,e.UndoDeleteNodesAction=U,e.RestoreDeletedNodesAction=M,e.PurgeDeletedNodesAction=b,e.DownloadNodesAction=w,e.CreateFolderAction=V,e.EditFolderAction=k,e.ShareNodeAction=$,e.UnshareNodesAction=j,e.CopyNodesAction=B,e.MoveNodesAction=G,e.ManagePermissionsAction=W,e.PrintFileAction=x,e.ManageVersionsAction=H,e.EditOfflineAction=Y,e.UnlockWriteAction=q,e.AddFavoriteAction=K,e.RemoveFavoriteAction=Q,e.RouterActionTypes=X,e.NavigateUrlAction=z,e.NavigateRouteAction=J,e.NavigateToFolder=Z,e.NavigateToParentFolder=ee,e.SearchActionTypes=te,e.SearchByTermAction=oe,e.ToggleSearchFilterAction=ie,e.ShowSearchFilterAction=ne,e.HideSearchFilterAction=ae,e.SnackbarActionTypes=re,e.SnackbarUserAction=se,e.SnackbarInfoAction=ce,e.SnackbarWarningAction=le,e.SnackbarErrorAction=pe,e.UploadActionTypes=de,e.UploadFilesAction=ue,e.UploadFolderAction=fe,e.UploadFileVersionAction=he,e.ViewerActionTypes=ye,e.ViewFileAction=Ee,e.ViewNodeAction=Se,e.FullscreenViewerAction=Ae,e.ClosePreviewAction=ge,e.SET_INFO_DRAWER_METADATA_ASPECT=Te,e.SetInfoDrawerMetadataAspectAction=Fe,e.TemplateActionTypes=Re,e.FileFromTemplate=_e,e.FolderFromTemplate=De,e.CreateFromTemplate=Ne,e.CreateFromTemplateSuccess=Oe,e.ContextMenuActionTypes=me,e.ContextMenu=ve,e.DialogEffects=Ce,e.RouterEffects=Pe,e.SnackbarEffects=Ue,e.SearchOptionIds={Files:"content",Folders:"folder",Libraries:"libraries"},e.selectApp=Me,e.getHeaderColor=be,e.getAppName=we,e.getLogoPath=Ve,e.getLanguagePickerState=ke,e.getUserProfile=$e,e.getCurrentFolder=je,e.getAppSelection=Be,e.getSharedUrl=Ge,e.getNavigationState=We,e.isInfoDrawerOpened=xe,e.showFacetFilter=He,e.getDocumentDisplayMode=Ye,e.getRepositoryStatus=qe,e.isQuickShareEnabled=Ke,e.isAdmin=Qe,e.getSideNavState=Xe,e.getRuleContext=ze,e.infoDrawerMetadataAspect=Je,e.SharedStoreModule=Ze,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=alfresco-aca-shared-store.umd.min.js.map