!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/router"),require("@alfresco/adf-core"),require("@angular/material/icon"),require("@angular/common"),require("@ngx-translate/core"),require("rxjs/operators"),require("rxjs"),require("@ngrx/store"),require("@alfresco/aca-shared/store"),require("@angular/core")):"function"==typeof define&&define.amd?define("@alfresco/aca-shared",["exports","@angular/router","@alfresco/adf-core","@angular/material/icon","@angular/common","@ngx-translate/core","rxjs/operators","rxjs","@ngrx/store","@alfresco/aca-shared/store","@angular/core"],t):t((e.alfresco=e.alfresco||{},e.alfresco["aca-shared"]={}),e.ng.router,e["@alfresco/adf-core"],e.ng.material.icon,e.ng.common,e["@ngx-translate/core"],e.rxjs.operators,e.rxjs,e["@ngrx/store"],e.alfresco["aca-shared"].store,e.ng.core)}(this,function(e,t,r,o,n,a,i,c,s,u,p){"use strict";var l=function(){return(l=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function d(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,a=r.call(e),i=[];try{for(;(void 0===t||0<t--)&&!(o=a.next()).done;)i.push(o.value)}catch(c){n={error:c}}finally{try{o&&!o.done&&(r=a["return"])&&r.call(a)}finally{if(n)throw n.error}}return i}function f(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e}function h(){return[]}var g=new p.InjectionToken("EXTENSION_DATA_LOADERS",{providedIn:"root",factory:h}),y=function(){function e(e){this.extensionDataLoaders=e}return e.prototype.canActivate=function(t){if(!this.extensionDataLoaders.length)return c.of(!0);var e=this.extensionDataLoaders.map(function(e){return e(t)});return c.forkJoin.apply(void 0,f(e)).pipe(i.map(function(){return!0}),i.catchError(function(e){return console.error("Some of the extension data loader guards has been errored."),console.error(e),c.of(!0)}))},e.decorators=[{type:p.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:Array,decorators:[{type:p.Inject,args:[g]}]}]},e.ngInjectableDef=p.defineInjectable({factory:function(){return new e(p.inject(g))},token:e,providedIn:"root"}),e}(),m=function(){function e(){this.scrollable=!1}return e.decorators=[{type:p.Component,args:[{selector:"aca-page-layout-content",template:"\n    <ng-content></ng-content>\n  ",encapsulation:p.ViewEncapsulation.None,changeDetection:p.ChangeDetectionStrategy.OnPush,host:{"class":"aca-page-layout-content"}}]}],e.propDecorators={scrollable:[{type:p.Input},{type:p.HostBinding,args:["class.scrollable"]}]},e}(),v=function(){function e(){}return e.decorators=[{type:p.Component,args:[{selector:"aca-page-layout-error",template:"\n    <ng-content></ng-content>\n  ",encapsulation:p.ViewEncapsulation.None,changeDetection:p.ChangeDetectionStrategy.OnPush,host:{"class":"aca-page-layout-error"}}]}],e}(),b=function(){function e(){}return e.decorators=[{type:p.Component,args:[{selector:"aca-page-layout-header",template:"<ng-content></ng-content>",encapsulation:p.ViewEncapsulation.None,changeDetection:p.ChangeDetectionStrategy.OnPush,host:{"class":"aca-page-layout-header"}}]}],e}(),x=function(){function e(){this.hasError=!1}return e.decorators=[{type:p.Component,args:[{selector:"aca-page-layout",template:'<ng-content select="aca-page-layout-header"></ng-content>\n<ng-content select="aca-page-layout-error" *ngIf="hasError"></ng-content>\n<ng-content select="aca-page-layout-content" *ngIf="!hasError"></ng-content>\n',encapsulation:p.ViewEncapsulation.None,host:{"class":"aca-page-layout"},changeDetection:p.ChangeDetectionStrategy.OnPush,styles:[".aca-page-layout{display:flex;flex-direction:column;flex:1;height:100%;overflow:hidden;min-height:0}.aca-page-layout .aca-page-layout-header{display:flex;align-items:center;flex:0 0 65px;flex-basis:48px;background:#fafafa;border-bottom:1px solid var(--theme-border-color,rgba(0,0,0,.07));padding:0 24px}.aca-page-layout .aca-page-layout-content,.aca-page-layout .aca-page-layout-error{display:flex;flex-direction:row;flex:1;height:100%;overflow:hidden}.aca-page-layout .main-content{display:flex;flex-direction:column;flex:1;height:100%;overflow:hidden;min-height:0}.aca-page-layout .scrollable,.aca-page-layout .scrollable .main-content{overflow:auto!important}.aca-page-layout .sidebar{display:block;height:100%;overflow-y:scroll;max-width:350px;width:350px}[dir=rtl] .aca-page-layout .main-content{border-left:1px solid var(--theme-border-color,rgba(0,0,0,.07))}[dir=ltr] .aca-page-layout .main-content{border-right:1px solid var(--theme-border-color,rgba(0,0,0,.07))}"]}]}],e.propDecorators={hasError:[{type:p.Input}]},e}(),A=function(){function e(){}return e.decorators=[{type:p.NgModule,args:[{imports:[n.CommonModule],declarations:[m,v,b,x],exports:[m,v,b,x]}]}],e}(),C=function(){function e(){}return e.prototype.ngOnInit=function(){this.node=this.context.row.node},e.prototype.writeLockedBy=function(){return this.node&&this.node.entry.properties&&this.node.entry.properties["cm:lockOwner"]&&this.node.entry.properties["cm:lockOwner"].displayName},e.decorators=[{type:p.Component,args:[{selector:"aca-locked-by",template:'\n    <mat-icon class="locked_by--icon">lock</mat-icon>\n    <span class="locked_by--name">{{ writeLockedBy() }}</span>\n  ',changeDetection:p.ChangeDetectionStrategy.OnPush,encapsulation:p.ViewEncapsulation.None,host:{"class":"aca-locked-by"},styles:[".aca-locked-by{display:flex;align-items:center;padding:0 10px;color:var(--theme-text-color,rgba(0,0,0,.54))}.aca-locked-by .locked_by--icon{font-size:14px;width:14px;height:14px}.aca-locked-by .locked_by--name{font-size:12px;padding:0 2px}"]}]}],e.ctorParameters=function(){return[]},e.propDecorators={context:[{type:p.Input}]},e}(),S=function(){function e(){}return e.decorators=[{type:p.NgModule,args:[{imports:[n.CommonModule,o.MatIconModule],declarations:[C],exports:[C]}]}],e}(),I=function(){function e(){this.routeCache=new Map}return e.prototype.resetCache=function(){var t=this;this.routeCache.forEach(function(e){t.deactivateComponent(e.handle)}),this.routeCache.clear()},e.prototype.deactivateComponent=function(e){if(e){var t=e.componentRef;t&&t.destroy()}},e.prototype.shouldReuseRoute=function(e,t){var r=e.routeConfig===t.routeConfig;return r&&this.addRedirectsRecursively(e),r},e.prototype.shouldDetach=function(e){var t=this.getRouteData(e);return t&&t.reuse},e.prototype.store=function(e,t){var r=this.getFullRouteUrl(e),o=this.getRouteData(e);this.routeCache.set(r,{handle:t,data:o}),this.addRedirectsRecursively(e)},e.prototype.shouldAttach=function(e){var t=this.getFullRouteUrl(e);return this.routeCache.has(t)},e.prototype.retrieve=function(e){var t=this.getFullRouteUrl(e),r=this.getRouteData(e);return r&&r.reuse&&this.routeCache.has(t)?this.routeCache.get(t).handle:null},e.prototype.addRedirectsRecursively=function(e){var t=this,r=e.routeConfig;if(r){if(!r.loadChildren){var o=e.firstChild,n=o?this.getRouteUrlPaths(o).join("/"):"",a=r.children;if(a){var i=a.find(function(e){return""===e.path&&!!e.redirectTo});i&&(i.redirectTo=n)}}e.children.forEach(function(e){return t.addRedirectsRecursively(e)})}},e.prototype.getFullRouteUrl=function(e){return this.getFullRouteUrlPaths(e).filter(Boolean).join("/")},e.prototype.getFullRouteUrlPaths=function(e){var t=this.getRouteUrlPaths(e);return e.parent?f(this.getFullRouteUrlPaths(e.parent),t):t},e.prototype.getRouteUrlPaths=function(e){return e.url.map(function(e){return e.path})},e.prototype.getRouteData=function(e){return e.routeConfig&&e.routeConfig.data},e}(),w=function(){function e(e){this.isQuickShareEnabled$=e.select(u.isQuickShareEnabled)}return e.prototype.canActivate=function(e){return this.isQuickShareEnabled$},e.prototype.canActivateChild=function(e){return this.canActivate(e)},e.decorators=[{type:p.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:s.Store}]},e.ngInjectableDef=p.defineInjectable({factory:function(){return new e(p.inject(s.Store))},token:e,providedIn:"root"}),e}(),O=function(){function e(e,t,r){var o=this;this.config=t,this.ready=new c.BehaviorSubject(e.isLoggedIn()||this.withCredentials),this.ready$=this.ready.asObservable(),e.onLogin.subscribe(function(){r.resetCache(),o.ready.next(!0)}),e.onLogout.subscribe(function(){r.resetCache()})}return Object.defineProperty(e.prototype,"withCredentials",{get:function(){return this.config.get("auth.withCredentials",!1)},enumerable:!0,configurable:!0}),e.decorators=[{type:p.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:r.AuthenticationService},{type:r.AppConfigService},{type:I,decorators:[{type:p.Inject,args:[t.RouteReuseStrategy]}]}]},e.ngInjectableDef=p.defineInjectable({factory:function(){return new e(p.inject(r.AuthenticationService),p.inject(r.AppConfigService),p.inject(t.RouteReuseStrategy))},token:e,providedIn:"root"}),e}(),D=function(){function e(e,t){this.api=e,this.preferences=t}return e.prototype.deleteNode=function(e,t){return void 0===t&&(t={}),c.from(this.api.nodesApi.deleteNode(e,t))},e.prototype.getNode=function(e,t){void 0===t&&(t={});var r=Object.assign({include:["path","properties","allowableOperations","permissions"]},t);return c.from(this.api.nodesApi.getNode(e,r))},e.prototype.getNodeInfo=function(e,t){var r=Object.assign({include:["isFavorite","allowableOperations","path"]},t||{});return c.from(this.api.nodesApi.getNodeInfo(e,r))},e.prototype.getNodeChildren=function(e,t){void 0===t&&(t={});var r={maxItems:this.preferences.paginationSize,skipCount:0,include:["isLocked","path","properties","allowableOperations","permissions"]},o=Object.assign(r,t);return c.from(this.api.nodesApi.getNodeChildren(e,o))},e.prototype.deleteSharedLink=function(e){return c.from(this.api.sharedLinksApi.deleteSharedLink(e))},e.prototype.getDeletedNodes=function(e){void 0===e&&(e={});var t=Object.assign({include:["path"]},e);return c.from(this.api.nodesApi.getDeletedNodes(t))},e.prototype.restoreNode=function(e){return c.from(this.api.nodesApi.restoreNode(e))},e.prototype.purgeDeletedNode=function(e){return c.from(this.api.nodesApi.purgeDeletedNode(e))},e.prototype.getPerson=function(e,t){return c.from(this.api.peopleApi.getPerson(e,t))},e.prototype.copyNode=function(e,t,r,o){return c.from(this.api.nodesApi.copyNode(e,{targetParentId:t,name:r},o))},e.prototype.getRepositoryInformation=function(){return c.from(this.api.getInstance().discovery.discoveryApi.getRepositoryInformation())},e.prototype.getFavorites=function(e,t){return c.from(this.api.favoritesApi.getFavorites(e,t))},e.prototype.getFavoriteLibraries=function(e,t){return void 0===e&&(e="-me-"),this.getFavorites(e,l({},t,{where:"(EXISTS(target/site))"})).pipe(i.map(function(e){return{list:{entries:e.list.entries.map(function(e){var t=e.entry;return t.target.site.createdAt=t.createdAt,{entry:t.target.site}}),pagination:e.list.pagination}}}))},e.prototype.findSharedLinks=function(e){return c.from(this.api.sharedLinksApi.findSharedLinks(e))},e.prototype.getSharedLinkContent=function(e,t){return this.api.contentApi.getSharedLinkContentUrl(e,t)},e.prototype.search=function(e){return c.from(this.api.searchApi.search(e))},e.prototype.getContentUrl=function(e,t){return this.api.contentApi.getContentUrl(e,t)},e.prototype.deleteSite=function(e,t){return c.from(this.api.sitesApi.deleteSite(e,t))},e.prototype.leaveSite=function(e){return c.from(this.api.sitesApi.removeSiteMember(e,"-me-"))},e.prototype.createSite=function(e,t){return c.from(this.api.sitesApi.createSite(e,t))},e.prototype.getSite=function(e,t){return c.from(this.api.sitesApi.getSite(e,t))},e.prototype.updateLibrary=function(e,t){return c.from(this.api.sitesApi.updateSite(e,t))},e.prototype.addFavorite=function(e){var t=e.map(function(e){var t,r=e.entry,o=r.isFolder,n=r.nodeId,a=r.id,i=e.entry.guid,c=i||n||a;return{target:(t={},t[i?"site":o?"folder":"file"]={guid:c},t)}});return c.from(this.api.favoritesApi.addFavorite("-me-",t))},e.prototype.removeFavorite=function(e){var r=this;return c.from(Promise.all(e.map(function(e){var t=e.entry.nodeId||e.entry.id;return r.api.favoritesApi.removeFavoriteSite("-me-",t)})))},e.prototype.unlockNode=function(e,t){return this.api.nodesApi.unlockNode(e,t)},e.decorators=[{type:p.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:r.AlfrescoApiService},{type:r.UserPreferencesService}]},e.ngInjectableDef=p.defineInjectable({factory:function(){return new e(p.inject(r.AlfrescoApiService),p.inject(r.UserPreferencesService))},token:e,providedIn:"root"}),e}(),j=function(){function n(){this.defaultOptions={operation:n.DEFAULT_OPERATION,target:null}}return n.prototype.check=function(e,t,r){var o=this,n=Object.assign({},this.defaultOptions,r||{});return!!e&&(Array.isArray(e)?0<(e=e.filter(function(e){return e})).length&&e.every(function(e){return o.isOperationAllowed(e,t,n)}):this.isOperationAllowed(e,t,n))},n.prototype.isOperationAllowed=function(e,t,r){var o=this.getAllowableOperations(e,r.target);return!!o.length&&(r.operation===n.DEFAULT_OPERATION?t.some(function(e){return o.includes(e)}):t.every(function(e){return o.includes(e)}))},n.prototype.getAllowableOperations=function(e,t){var r;return r="entry"in e?e.entry:e,t?r[t]||[]:"allowableOperationsOnTarget"in r?r.allowableOperationsOnTarget||[]:r.allowableOperations||[]},n.DEFAULT_OPERATION="OR",n.decorators=[{type:p.Injectable,args:[{providedIn:"root"}]}],n.ngInjectableDef=p.defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n}(),k=function(){function e(){this.text="APP.MESSAGES.ERRORS.MISSING_CONTENT"}return e.decorators=[{type:p.Component,args:[{selector:"aca-generic-error",template:'<mat-icon>error</mat-icon>\n<p class="generic-error__title">\n  {{ text | translate }}\n</p>\n',encapsulation:p.ViewEncapsulation.None,changeDetection:p.ChangeDetectionStrategy.OnPush,host:{"class":"aca-generic-error"},styles:[".aca-generic-error{color:var(--theme-text-color,rgba(0,0,0,.54));display:flex;align-items:center;justify-content:center;flex-direction:column;width:100%;height:100%}.aca-generic-error__title{font-size:16px}.aca-generic-error mat-icon{color:var(--theme-warn-color,#f44336);font-size:52px;height:52px;width:52px}"]}]}],e.propDecorators={text:[{type:p.Input}]},e}(),E=function(){function e(){}return e.decorators=[{type:p.NgModule,args:[{imports:[n.CommonModule,o.MatIconModule,a.TranslateModule.forChild()],declarations:[k],exports:[k]}]}],e}(),R=function(){function e(e){this.store=e,this.execute$=new c.Subject,this.onDestroy$=new c.Subject,this.enabled=!0}return e.prototype.onContextMenuEvent=function(e){if(e&&(e.preventDefault(),this.enabled)){var t=this.getTarget(e);t&&this.execute(e,t)}},e.prototype.ngOnInit=function(){var t=this;this.execute$.pipe(i.debounceTime(300),i.takeUntil(this.onDestroy$)).subscribe(function(e){t.store.dispatch(new u.ContextMenu(e))})},e.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.onDestroy$.complete()},e.prototype.execute=function(e,t){this.isSelected(t)||t.dispatchEvent(new MouseEvent("click")),this.execute$.next(e)},e.prototype.getTarget=function(e){var t=e.target;return this.findAncestor(t,"adf-datatable-cell")},e.prototype.isSelected=function(e){return!!e&&this.findAncestor(e,"adf-datatable-row").classList.contains("adf-is-selected")},e.prototype.findAncestor=function(e,t){if(e.classList.contains(t))return e;for(;(e=e.parentElement)&&!e.classList.contains(t););return e},e.decorators=[{type:p.Directive,args:[{selector:"[acaContextActions]",exportAs:"acaContextActions"}]}],e.ctorParameters=function(){return[{type:s.Store}]},e.propDecorators={enabled:[{type:p.Input,args:["acaContextEnable"]}],onContextMenuEvent:[{type:p.HostListener,args:["contextmenu",["$event"]]}]},e}(),L=function(){function e(){}return e.decorators=[{type:p.NgModule,args:[{declarations:[R],exports:[R]}]}],e}();var N=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[D,j,O]}},e.decorators=[{type:p.NgModule,args:[{imports:[L],exports:[L]}]}],e}();e.DefaultExtensionLoaderFactory=h,e.EXTENSION_DATA_LOADERS=g,e.ExtensionsDataLoaderGuard=y,e.PageLayoutContentComponent=m,e.PageLayoutErrorComponent=v,e.PageLayoutHeaderComponent=b,e.PageLayoutComponent=x,e.PageLayoutModule=A,e.LockedByComponent=C,e.LockedByModule=S,e.AppRouteReuseStrategy=I,e.AppSharedRuleGuard=w,e.AppService=O,e.ContentApiService=D,e.NodePermissionService=j,e.GenericErrorComponent=k,e.GenericErrorModule=E,e.ContextActionsDirective=R,e.ContextActionsModule=L,e.isLocked=
/*!
     * @license
     * Alfresco Example Content Application
     *
     * Copyright (C) 2005 - 2020 Alfresco Software Limited
     *
     * This file is part of the Alfresco Example Content Application.
     * If the software was purchased under a paid Alfresco license, the terms of
     * the paid license agreement will prevail.  Otherwise, the software is
     * provided under the following open source license terms:
     *
     * The Alfresco Example Content Application is free software: you can redistribute it and/or modify
     * it under the terms of the GNU Lesser General Public License as published by
     * the Free Software Foundation, either version 3 of the License, or
     * (at your option) any later version.
     *
     * The Alfresco Example Content Application is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     * GNU Lesser General Public License for more details.
     *
     * You should have received a copy of the GNU Lesser General Public License
     * along with Alfresco. If not, see <http://www.gnu.org/licenses/>.
     */
function P(e){var t=e.entry;return t&&t.isLocked||t.properties&&("READ_ONLY_LOCK"===t.properties["cm:lockType"]||"WRITE_LOCK"===t.properties["cm:lockType"])},e.isLibrary=function M(e){var t=e.entry;return t.guid&&t.id&&t.preset&&t.title&&t.visibility||"st:site"===t.nodeType},e.SharedModule=N,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=alfresco-aca-shared.umd.min.js.map